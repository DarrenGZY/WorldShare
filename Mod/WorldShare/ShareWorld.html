<!-- "script/apps/Aries/Creator/Game/Login/InternetLoadWorld.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>exit world sync,by big,2016/12/10</title>
</head>
<body>
    <pe:mcml>
        <script type="text/npl" refresh="false" src="WorldShareGUI.lua">
            <![CDATA[
                WorldShareGUI = commonlib.gettable("Mod.WorldShare.WorldShareGUI");
                WorldShareGUI:init();
                WorldShareGUI.githubRevison = 0;

                if(WorldShareGUI.firstCreate ~= 1) then
                    WorldShareGUI:compareRevision();
                end

                function shareNow()
                    Page:CloseWindow();

                    if(WorldShareGUI.firstCreate ~= 1 and tonumber(WorldShareGUI.currentRevison) < tonumber(WorldShareGUI.githubRevison)) then
                        _guihelper.MessageBox("当前本地版本小于Github版本，是否继续上传？", function(res)
                            if(res and res == 6) then
                                WorldShareGUI:syncToGithub();
                            end
                        end);
                    elseif(tonumber(WorldShareGUI.currentRevison) > tonumber(WorldShareGUI.githubRevison)) then
                       WorldShareGUI:syncToGithub();
                    end
                end
             ]]>
        </script>
        <div style="width:500px;height:270px;">
            <aries:window mode="thin" width="500" height="270" style="float:left;" title='<%=L"分享上传世界" %>'>
                <div style="padding:20px;font-size:18px;base-font-size:18px;color:#ffffff">
                    <div style="margin-left:140px;margin-top:30px;">
                        远程版本号：
                        <pe:if condition="<%=WorldShareGUI.firstCreate ~= 1 and WorldShareGUI.githubRevison == 0 %>">
                            正在获取中...
                        </pe:if>
                        <pe:if condition="<%=WorldShareGUI.firstCreate == 1 %>">
                            首次上传
                        </pe:if>
                        <pe:if condition="<%=WorldShareGUI.githubRevison ~= 0 %>">
                            <%=WorldShareGUI.githubRevison %>
                        </pe:if>
                    </div>
                    <div style="margin-left:140px;margin-top:10px;">
                        本地版本号：<%=WorldShareGUI.currentRevison %>
                    </div>
                    <pe:if condition="<%=WorldShareGUI.github ~= 0%>">
                        <input type="button" onclick="shareNow" value="马上分享" class="button_highlight" style="width: 80px;height: 35px;margin-top:30px;margin-left:190px;"/>
                    </pe:if>
                </div>
            </aries:window>
        </div>
    </pe:mcml>
</body>
</html>
