<!-- "script/apps/Aries/Creator/Game/Login/InternetLoadWorld.html" -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>exit world sync,by big,2016/12/10</title>
</head>
<body>
    <pe:mcml>
        <script type="text/npl" refresh="false" src="WorldShareGUI.lua">
            <![CDATA[
                WorldShareGUI = commonlib.gettable("Mod.WorldShare.WorldShareGUI");
                WorldShareGUI:init();
                WorldShareGUI.githubRevison = 0;
                WorldShareGUI:compareRevision();

                function shareNow()
                    Page:CloseWindow();

                    if(tonumber(WorldShareGUI.currentRevison) < tonumber(WorldShareGUI.githubRevison)) then
                        _guihelper.MessageBox_Plain("当前本地版本小于Github版本，是否继续上传？", function(res)
                            if(res and res == _guihelper.DialogResult.ShareNow) then
                                -- pressed OK
                                _guihelper.MessageBox("开始同步--将本地大小有变化的文件上传到github"); -- 上传或更新
                            elseif(res and res == _guihelper.DialogResult.Cancel) then
                                _guihelper.MessageBox("Cancel");
                            end
                        end, _guihelper.MessageBoxButtons.ShareNow,_guihelper.MessageBoxButtons.Cancel,nil,{ShareNow = "确定分享",Cancel = "取消分享"});
                    elseif(tonumber(WorldShareGUI.currentRevison) > tonumber(WorldShareGUI.githubRevison)) then
                        _guihelper.MessageBox("开始同步--将本地大小有变化的文件上传到github"); -- 上传或更新
                    end
                end
             ]]>
        </script>
        <div style="width:500px;height:270px;">
            <aries:window mode="thin" width="500" height="270" style="float:left;" title='<%=L"分享上传世界" %>'>
                <div style="padding:20px;font-size:18px;base-font-size:18px;color:#ffffff">
                    <div style="margin-left:80px;margin-top:40px;">
                        远程版本号：
                        <pe:if condition="<%=WorldShareGUI.githubRevison == 0 %>">
                            正在获取中...
                        </pe:if>
                        <pe:if condition="<%=WorldShareGUI.githubRevison ~= 0 %>">
                            <%=WorldShareGUI.githubRevison %>
                        </pe:if>
                    </div>
                    <div style="margin-left:80px;margin-top:30px;">
                        本地版本号：<%=WorldShareGUI.currentRevison %>
                    </div>
                    <pe:if condition="<%=WorldShareGUI.github ~= 0%>">
                        <input type="button" onclick="shareNow" value="马上分享" />
                    </pe:if>
                </div>
            </aries:window>
        </div>
    </pe:mcml>
</body>
</html>
